{
	"$schema": "https://railway.app/railway.schema.json",
	"build": {
		"builder": "NIXPACKS",
		"buildCommand": "cd server && cp .env.production .env && npm install && npx prisma generate --schema=./prisma/schema.prisma && npx prisma db push --schema=./prisma/schema.prisma --accept-data-loss && npm run build"
	},
	"deploy": {
		"startCommand": "cd server && node dist/index.js",
		"restartPolicyType": "ON_FAILURE",
		"restartPolicyMaxRetries": 10
	},
	"variables": {
		"DATABASE_URL": {
			"sync": false
		},
		"PORT": "3000",
		"NODE_ENV": "production",
		"PRISMA_SCHEMA_DISABLE_ADVISORY_LOCK": "0"
	}
}
